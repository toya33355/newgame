<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊñáÂ≠óÊó©Êâì„Å°„Ç≤„Éº„É†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        .game-container {
            width: 100%;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        .ui {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .rank-display {
            background: rgba(255,255,255,0.9);
            color: #333;
            padding: 10px 20px;
            border-radius: 25px;
            margin-top: 10px;
            font-size: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .comment-display {
            background: rgba(255,215,0,0.9);
            color: #333;
            padding: 8px 15px;
            border-radius: 20px;
            margin-top: 5px;
            font-size: 16px;
            max-width: 300px;
            animation: commentPulse 2s ease-in-out;
        }

        @keyframes commentPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .input-area {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
        }

        .input-field {
            padding: 15px 20px;
            font-size: 20px;
            border: 3px solid #ff6b6b;
            border-radius: 25px;
            background: rgba(255,255,255,0.9);
            outline: none;
            width: 300px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .enemy {
            position: absolute;
            display: flex;
            align-items: center;
            animation: moveLeft 12s linear forwards;
            z-index: 50;
        }

        .enemy-character {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-right: 20px;
            position: relative;
            animation: bounce 1s ease-in-out infinite alternate, glow 2s ease-in-out infinite alternate;
            box-shadow: 0 0 20px rgba(255,255,255,0.5);
        }

        .enemy-text {
            background: rgba(255,255,255,0.95);
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 18px;
            font-weight: bold;
            border: 3px solid #333;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            min-width: 150px;
            text-align: center;
        }

        .typed {
            color: #888;
            text-decoration: line-through;
        }

        .current {
            background-color: #ffeb3b;
            padding: 2px;
            border-radius: 3px;
        }

        /* „Ç®„Ç≠„Çª„É≥„Éà„É™„ÉÉ„ÇØ„Å™„Ç≠„É£„É©„ÇØ„Çø„Éº„Éá„Ç∂„Ç§„É≥ */
        .character-1 {
            background: radial-gradient(circle, #ff69b4, #ff1493);
            border: 6px solid #fff;
        }
        .character-1::before {
            content: 'üëÅÔ∏è';
            position: absolute;
            left: 20px;
            top: 15px;
            font-size: 24px;
            animation: blink 3s infinite;
        }
        .character-1::after {
            content: 'üëÅÔ∏è';
            position: absolute;
            right: 20px;
            top: 15px;
            font-size: 24px;
            animation: blink 3s infinite 0.5s;
        }

        .character-2 {
            background: radial-gradient(circle, #00ff7f, #32cd32);
            border: 6px solid #fff;
        }
        .character-2::before {
            content: 'ü¶∑';
            position: absolute;
            left: 25px;
            top: 30px;
            font-size: 20px;
            animation: wiggle 1s infinite;
        }
        .character-2::after {
            content: 'ü¶∑';
            position: absolute;
            right: 25px;
            top: 30px;
            font-size: 20px;
            animation: wiggle 1s infinite 0.5s;
        }

        .character-3 {
            background: radial-gradient(circle, #ffa500, #ff4500);
            border: 6px solid #fff;
        }
        .character-3::before {
            content: 'üëª';
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            font-size: 30px;
            animation: float 2s ease-in-out infinite;
        }

        .character-4 {
            background: radial-gradient(circle, #9400d3, #4b0082);
            border: 6px solid #fff;
        }
        .character-4::before {
            content: 'üåü';
            position: absolute;
            left: 15px;
            top: 10px;
            font-size: 16px;
            animation: sparkle 1.5s infinite;
        }
        .character-4::after {
            content: '‚ö°';
            position: absolute;
            right: 15px;
            bottom: 10px;
            font-size: 16px;
            animation: sparkle 1.5s infinite 0.7s;
        }

        .character-5 {
            background: radial-gradient(circle, #ff6b6b, #ee5a52);
            border: 6px solid #fff;
        }
        .character-5::before {
            content: 'üî•';
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            font-size: 28px;
            animation: fire 0.5s infinite alternate;
        }

        .character-6 {
            background: radial-gradient(circle, #4ecdc4, #26d0ce);
            border: 6px solid #fff;
        }
        .character-6::before {
            content: '‚ùÑÔ∏è';
            position: absolute;
            left: 30px;
            top: 20px;
            font-size: 20px;
            animation: spin 3s linear infinite;
        }
        .character-6::after {
            content: '‚ùÑÔ∏è';
            position: absolute;
            right: 30px;
            bottom: 20px;
            font-size: 20px;
            animation: spin 3s linear infinite reverse;
        }

        @keyframes moveLeft {
            from {
                right: -400px;
            }
            to {
                right: 100%;
            }
        }

        @keyframes bounce {
            0% {
                transform: translateY(0px) rotate(-5deg);
            }
            100% {
                transform: translateY(-10px) rotate(5deg);
            }
        }

        @keyframes glow {
            0% {
                box-shadow: 0 0 20px rgba(255,255,255,0.5);
            }
            100% {
                box-shadow: 0 0 40px rgba(255,255,255,0.8), 0 0 60px rgba(255,255,255,0.4);
            }
        }

        @keyframes blink {
            0%, 90% {
                opacity: 1;
            }
            95% {
                opacity: 0.1;
            }
        }

        @keyframes wiggle {
            0%, 100% {
                transform: rotate(-3deg);
            }
            50% {
                transform: rotate(3deg);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translate(-50%, -50%) translateY(0px);
            }
            50% {
                transform: translate(-50%, -50%) translateY(-5px);
            }
        }

        @keyframes sparkle {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.5;
                transform: scale(1.2);
            }
        }

        @keyframes fire {
            0% {
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                transform: translate(-50%, -50%) scale(1.1);
            }
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        .explosion {
            position: absolute;
            pointer-events: none;
            z-index: 200;
        }

        .explosion-particle {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: explode 0.8s ease-out forwards;
        }

        @keyframes explode {
            0% {
                transform: scale(1) translate(0, 0);
                opacity: 1;
            }
            100% {
                transform: scale(0) translate(var(--dx), var(--dy));
                opacity: 0;
            }
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            z-index: 1000;
            display: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .restart-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            background: #ff5252;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="ui">
            <div>„Çπ„Ç≥„Ç¢: <span id="score">0</span></div>
            <div>„É©„Ç§„Éï: <span id="lives">5</span></div>
            <div class="rank-display" id="rankDisplay">„É©„É≥„ÇØ: ÂàùÂøÉËÄÖ</div>
            <div class="comment-display" id="commentDisplay" style="display: none;"></div>
        </div>

        <div class="input-area">
            <input type="text" class="input-field" id="inputField" placeholder="„Åì„Åì„Å´ÊñáÂ≠ó„ÇíÂÖ•Âäõ...">
        </div>

        <div class="game-over" id="gameOver">
            <div>„Ç≤„Éº„É†„Ç™„Éº„Éê„ÉºÔºÅ</div>
            <div>ÊúÄÁµÇ„Çπ„Ç≥„Ç¢: <span id="finalScore">0</span></div>
            <button class="restart-btn" onclick="restartGame()">„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Éó„É¨„Ç§</button>
        </div>
    </div>

    <script>
        class TypingGame {
            constructor() {
                this.score = 0;
                this.lives = 5;
                this.enemies = [];
                this.gameRunning = true;
                this.enemyId = 0;
                this.currentRank = 'ÂàùÂøÉËÄÖ';
                this.lastCommentScore = 0;
                
                this.words = [
                    // Âü∫Êú¨„ÅÆÊå®Êã∂„ÉªÊÑüÊÉÖ
                    '„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô', '„Åì„Çì„Å´„Å°„ÅØ', '„Åì„Çì„Å∞„Çì„ÅØ', '„ÅÇ„Çä„Åå„Å®„ÅÜ', '„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô',
                    '„Åå„Çì„Å∞„Å£„Å¶', '„Åä„Å§„Åã„Çå„Åï„Åæ', '„Åä„ÇÅ„Åß„Å®„ÅÜ', '„Åô„Åø„Åæ„Åõ„Çì', '„Åî„ÇÅ„Çì„Å™„Åï„ÅÑ',
                    '„Å†„ÅÑ„Åò„Çá„ÅÜ„Å∂', '„Åí„Çì„Åç', '„Åó„ÅÇ„Çè„Åõ', '„Åü„ÅÆ„Åó„ÅÑ', '„ÅÜ„Çå„Åó„ÅÑ', '„Åã„Å™„Åó„ÅÑ',
                    
                    // È£ü„ÅπÁâ©
                    '„Çâ„Éº„ÇÅ„Çì', '„Åô„Åó', '„Å¶„Çì„Å∑„Çâ', '„ÇÑ„Åç„Å®„Çä', '„Åä„Å´„Åé„Çä', '„Åπ„Çì„Å®„ÅÜ',
                    '„Åü„Åì„ÇÑ„Åç', '„Åä„Åì„ÅÆ„Åø„ÇÑ„Åç', '„ÅÜ„Å©„Çì', '„Åù„Å∞', '„Å®„Çì„Åã„Å§', '„Åã„Çâ„ÅÇ„Åí',
                    '„Å°„ÇÉ„Éº„ÅØ„Çì', '„Åé„Çá„ÅÜ„Åñ', '„ÇÑ„Åç„Å´„Åè', '„Åó„ÇÉ„Å∂„Åó„ÇÉ„Å∂', '„Åô„Åç„ÇÑ„Åç',
                    
                    // ÂãïÁâ©
                    '„Å≠„Åì', '„ÅÑ„Å¨', '„ÅÜ„Åï„Åé', '„ÅØ„ÇÄ„Åô„Åü„Éº', '„Å±„Çì„Å†', '„Çâ„ÅÑ„Åä„Çì',
                    '„Åû„ÅÜ', '„Åç„Çä„Çì', '„Å∫„Çì„Åé„Çì', '„ÅÑ„Çã„Åã', '„Åè„Åò„Çâ', '„Åï„ÇÅ',
                    
                    // Ëâ≤„ÉªËá™ÁÑ∂
                    '„ÅÇ„Åã', '„ÅÇ„Åä', '„Åç„ÅÑ„Çç', '„Åø„Å©„Çä', '„ÇÄ„Çâ„Åï„Åç', '„Å¥„Çì„Åè',
                    '„Åù„Çâ', '„ÅÜ„Åø', '„ÇÑ„Åæ', '„Åã„Çè', '„ÇÇ„Çä', '„ÅØ„Å™', '„Åç', '„Åè„Åï',
                    '„Åü„ÅÑ„Çà„ÅÜ', '„Å§„Åç', '„Åª„Åó', '„Åè„ÇÇ', '„ÅÇ„ÇÅ', '„ÇÜ„Åç',
                    
                    // Êó•Â∏∏„ÉªÁâ©
                    '„Åß„Çì„Çè', '„Å¶„Çå„Å≥', '„Çâ„Åò„Åä', '„Åè„Çã„Åæ', '„Åß„Çì„Åó„ÇÉ', '„Å≤„Åì„ÅÜ„Åç',
                    '„Åã„Åï', '„Åã„Å∞„Çì', '„Å®„Åë„ÅÑ', '„ÇÅ„Åå„Å≠', '„Åè„Å§', '„Åµ„Åè',
                    
                    // Â≠¶Ê†°„ÉªÂãâÂº∑
                    '„Åå„Å£„Åì„ÅÜ', '„Åõ„Çì„Åõ„ÅÑ', '„Åå„Åè„Åõ„ÅÑ', '„Åπ„Çì„Åç„Çá„ÅÜ', '„Åó„ÇÖ„Åè„Å†„ÅÑ',
                    '„Å¶„Åô„Å®', '„Åò„ÇÖ„Åé„Çá„ÅÜ', '„Åç„Çá„ÅÜ„Åó„Å§', '„Å®„Åó„Çá„Åã„Çì', '„Åü„ÅÑ„ÅÑ„Åè„Åã„Çì',
                    
                    // ÊäÄË°ì„ÉªË∂£Âë≥
                    '„Å∑„Çç„Åê„Çâ„Åø„Çì„Åê', '„Åì„Çì„Å¥„ÇÖ„Éº„Åü', '„ÅÑ„Çì„Åü„Éº„Å≠„Å£„Å®', '„Åô„Åæ„Éº„Å®„Åµ„Åâ„Çì',
                    '„Åí„Éº„ÇÄ', '„ÅÇ„Å´„ÇÅ', '„Åæ„Çì„Åå', '„Åä„Çì„Åå„Åè', '„Åà„ÅÑ„Åå', '„Å©„Åè„Åó„Çá',
                    
                    // Èõ£„Åó„ÅÑË®ÄËëâ
                    '„Åò„Çì„Åì„ÅÜ„Å°„ÅÆ„ÅÜ', '„Å∞„Éº„Å°„ÇÉ„Çã„Çä„ÅÇ„Çä„Å¶„ÅÉ', '„Å∂„Çç„Å£„Åè„Å°„Åá„Éº„Çì',
                    '„Åæ„Åô„Åü„Éº„Å∑„Çâ„Çì„Å´„Çì„Åê', '„ÅÑ„Çì„Åµ„Çâ„Åô„Å®„Çâ„Åè„Å°„ÇÉ„Éº', '„ÅÇ„Éº„Åç„Å¶„Åè„Å°„ÇÉ„Éº',
                    '„Åß„ÅÉ„Éº„Å∑„Çâ„Éº„Å´„Çì„Åê', '„Åæ„Å£„Åó„Éº„Çì„Çâ„Éº„Å´„Çì„Åê', '„Å≥„Å£„Åê„Åß„Éº„Åü',
                    
                    // Èï∑„ÅÑÊñáÁ´†
                    '„Åç„Çá„ÅÜ„ÅØ„Å®„Å¶„ÇÇ„ÅÑ„ÅÑ„Å¶„Çì„Åç„Åß„Åô„Å≠', '„ÅÇ„Åó„Åü„ÅÆ„Çà„Å¶„ÅÑ„ÅØ„Åç„Åæ„Çä„Åæ„Åó„Åü„Åã',
                    '„Çâ„ÅÑ„Åó„ÇÖ„ÅÜ„Åæ„Å§„Å´„Åà„ÅÑ„Åå„Çí„Åø„Å´„ÅÑ„Åç„Åæ„Åõ„Çì„Åã', '„Åì„ÅÆ„Çå„Åô„Å®„Çâ„Çì„ÅÆ„Çä„Çá„ÅÜ„Çä„ÅØ„Åä„ÅÑ„Åó„ÅÑ„Åß„Åô',
                    '„Å´„Åª„Çì„Åî„ÅÆ„Åπ„Çì„Åç„Çá„ÅÜ„ÅØ„Åü„ÅÆ„Åó„ÅÑ„Åß„Åô„Åã', '„Åõ„Çì„Åõ„ÅÑ„ÅÆ„Åõ„Å§„ÇÅ„ÅÑ„ÅØ„Çè„Åã„Çä„ÇÑ„Åô„Åã„Å£„Åü„Åß„Åô'
                ];
                
                this.inputField = document.getElementById('inputField');
                this.scoreElement = document.getElementById('score');
                this.livesElement = document.getElementById('lives');
                this.gameOverElement = document.getElementById('gameOver');
                this.rankElement = document.getElementById('rankDisplay');
                this.commentElement = document.getElementById('commentDisplay');
                
                this.init();
            }
            
            init() {
                this.inputField.addEventListener('input', () => this.handleInput());
                this.inputField.addEventListener('keydown', (e) => this.handleKeyDown(e));
                this.inputField.focus();
                this.spawnEnemies();
            }
            
            spawnEnemies() {
                if (!this.gameRunning) return;
                
                this.createEnemy();
                
                const nextSpawn = Math.random() * 2000 + 1500; // 1.5-3.5ÁßíÈñìÈöî
                setTimeout(() => this.spawnEnemies(), nextSpawn);
            }
            
            createEnemy() {
                const word = this.words[Math.floor(Math.random() * this.words.length)];
                const characterType = Math.floor(Math.random() * 6) + 1;
                const yPosition = Math.random() * (window.innerHeight - 200) + 50;
                
                const enemy = {
                    id: this.enemyId++,
                    word: word,
                    typed: '',
                    element: null,
                    y: yPosition,
                    characterType: characterType,
                    readyToDestroy: false
                };
                
                this.createEnemyElement(enemy);
                this.enemies.push(enemy);
                
                // 12ÁßíÂæå„Å´Êïµ„ÇíÂâäÈô§ÔºàÁîªÈù¢Â§ñ„Å´Âá∫„ÅüÂ†¥ÂêàÔºâ
                setTimeout(() => {
                    if (this.enemies.some(e => e.id === enemy.id)) {
                        this.removeEnemy(enemy.id);
                        this.loseLife();
                    }
                }, 12000);
            }
            
            createEnemyElement(enemy) {
                const enemyDiv = document.createElement('div');
                enemyDiv.className = 'enemy';
                enemyDiv.style.top = enemy.y + 'px';
                
                const character = document.createElement('div');
                character.className = `enemy-character character-${enemy.characterType}`;
                
                const textDiv = document.createElement('div');
                textDiv.className = 'enemy-text';
                textDiv.innerHTML = this.formatText(enemy.word, enemy.typed);
                
                enemyDiv.appendChild(character);
                enemyDiv.appendChild(textDiv);
                
                enemy.element = enemyDiv;
                enemy.textElement = textDiv;
                
                document.querySelector('.game-container').appendChild(enemyDiv);
            }
            
            formatText(word, typed, isPreview = false) {
                let result = '';
                if (isPreview) {
                    // „Éó„É¨„Éì„É•„ÉºË°®Á§∫ÔºàÈÉ®ÂàÜ‰∏ÄËá¥ÊôÇÔºâ
                    for (let i = 0; i < word.length; i++) {
                        if (i < typed.length) {
                            result += `<span class="current">${word[i]}</span>`;
                        } else {
                            result += word[i];
                        }
                    }
                } else {
                    // ÈÄöÂ∏∏Ë°®Á§∫„Åæ„Åü„ÅØÂÆåÂÖ®‰∏ÄËá¥ÊôÇ
                    for (let i = 0; i < word.length; i++) {
                        if (i < typed.length) {
                            result += `<span class="typed">${word[i]}</span>`;
                        } else if (i === typed.length && typed === word) {
                            result += `<span class="current">${word[i]}</span>`;
                        } else {
                            result += word[i];
                        }
                    }
                }
                return result;
            }
            
            handleInput() {
                const input = this.inputField.value;
                
                // ÂÖ•Âäõ„Å´‰∏ÄËá¥„Åô„ÇãÊïµ„ÇíÊé¢„Åó„Å¶„Éè„Ç§„É©„Ç§„ÉàË°®Á§∫„ÅÆ„Åø
                for (let enemy of this.enemies) {
                    if (enemy.word === input) {
                        enemy.typed = input;
                        enemy.textElement.innerHTML = this.formatText(enemy.word, enemy.typed);
                        enemy.readyToDestroy = true;
                        break;
                    } else if (enemy.word.startsWith(input) && input.length > 0) {
                        enemy.typed = '';
                        enemy.textElement.innerHTML = this.formatText(enemy.word, input, true);
                        enemy.readyToDestroy = false;
                        break;
                    }
                }
            }
            
            handleKeyDown(event) {
                if (event.key === 'Enter') {
                    const input = this.inputField.value;
                    
                    // ÂÆåÂÖ®‰∏ÄËá¥„Åô„ÇãÊïµ„ÇíÊé¢„Åó„Å¶Á†¥Â£ä
                    for (let enemy of this.enemies) {
                        if (enemy.word === input && enemy.readyToDestroy) {
                            this.destroyEnemy(enemy);
                            return;
                        }
                    }
                }
            }
            
            destroyEnemy(enemy) {
                this.score += enemy.word.length * 10;
                this.scoreElement.textContent = this.score;
                
                this.updateRankAndComment();
                this.createExplosion(enemy.element);
                this.removeEnemy(enemy.id);
                
                // ÂÖ•ÂäõÊ¨Ñ„Çí„ÇØ„É™„Ç¢„Åó„Å¶„Éï„Ç©„Éº„Ç´„Çπ„ÇíÊàª„Åô
                this.inputField.value = '';
                this.inputField.focus();
            }
            
            updateRankAndComment() {
                const ranks = [
                    { threshold: 0, rank: 'ÂàùÂøÉËÄÖ', comments: ['„Åå„Çì„Å∞„Å£„Å¶ÔºÅ', '„ÅÑ„ÅÑ„Çπ„Çø„Éº„Éà„Åß„ÅôÔºÅ'] },
                    { threshold: 500, rank: 'Ë¶ãÁøí„ÅÑ', comments: ['„Å™„Åã„Å™„Åã„ÇÑ„Çä„Åæ„Åô„Å≠ÔºÅ', 'Ë™øÂ≠ê„ÅåÂá∫„Å¶„Åç„Åæ„Åó„ÅüÔºÅ'] },
                    { threshold: 1000, rank: '‰∏≠Á¥öËÄÖ', comments: ['Á¥†Êô¥„Çâ„Åó„ÅÑÔºÅ', '„ÅÑ„ÅÑÊÑü„Åò„Åß„ÅôÔºÅ'] },
                    { threshold: 2000, rank: '‰∏äÁ¥öËÄÖ', comments: ['„Åô„Åî„ÅÑ„Åß„ÅôÔºÅ', '„Å®„Å¶„ÇÇ‰∏äÊâã„Åß„Åô„Å≠ÔºÅ'] },
                    { threshold: 3500, rank: '„Ç®„Ç≠„Çπ„Éë„Éº„Éà', comments: ['„ÅÇ„Å™„Åü„ÅØ„Åô„Åî„ÅÑ„Åß„ÅôÔºÅ', 'È©öÁï∞ÁöÑ„Å™ÈÄüÂ∫¶„Åß„ÅôÔºÅ'] },
                    { threshold: 5000, rank: '„Éû„Çπ„Çø„Éº', comments: ['‰ø°„Åò„Çâ„Çå„Åæ„Åõ„ÇìÔºÅ', 'ÔºëÔºêÔºê‰∫∫„Å´‰∏Ä‰∫∫„ÅÆÊâçËÉΩ„Åß„ÅôÔºÅ'] },
                    { threshold: 7500, rank: '„É¨„Ç∏„Çß„É≥„Éâ', comments: ['‰ºùË™¨ÁöÑ„Åß„ÅôÔºÅ', 'ÔºëÔºêÔºêÔºê‰∫∫„Å´‰∏Ä‰∫∫„ÅÆÂ§©Êâç„Åß„ÅôÔºÅ'] },
                    { threshold: 10000, rank: '„Ç¥„ÉÉ„Éâ', comments: ['Á•û„ÅÆÈ†òÂüü„Åß„ÅôÔºÅ', 'Ôºë‰∏á‰∫∫„Å´‰∏Ä‰∫∫„ÅÆÈÄ∏Êùê„Åß„ÅôÔºÅ'] },
                    { threshold: 15000, rank: 'Ë∂ÖË∂äËÄÖ', comments: ['‰∫∫Èñì„ÇíË∂ÖË∂ä„Åó„Åæ„Åó„ÅüÔºÅ', 'ÔºëÔºê‰∏á‰∫∫„Å´‰∏Ä‰∫∫„ÅÆÊâçËÉΩ„Åß„ÅôÔºÅ'] },
                    { threshold: 20000, rank: 'Á©∂Ê•µ', comments: ['Á©∂Ê•µ„ÅÆÂ≠òÂú®„Åß„ÅôÔºÅ', 'ÔºëÔºêÔºê‰∏á‰∫∫„Å´‰∏Ä‰∫∫„ÅÆÊâçËÉΩ„Åß„ÅôÔºÅ'] }
                ];
                
                let newRank = this.currentRank;
                let shouldShowComment = false;
                
                for (let i = ranks.length - 1; i >= 0; i--) {
                    if (this.score >= ranks[i].threshold) {
                        if (ranks[i].rank !== this.currentRank) {
                            newRank = ranks[i].rank;
                            shouldShowComment = true;
                        }
                        break;
                    }
                }
                
                // „É©„É≥„ÇØ„ÅåÂ§â„Çè„Å£„ÅüÂ†¥Âêà„Åæ„Åü„ÅØ„Çπ„Ç≥„Ç¢„Åå‰∏ÄÂÆöÈñìÈöî„ÅßÂ¢ó„Åà„ÅüÂ†¥Âêà„Å´„Ç≥„É°„É≥„ÉàË°®Á§∫
                if (shouldShowComment || (this.score - this.lastCommentScore >= 1000 && this.score > 1000)) {
                    this.currentRank = newRank;
                    this.rankElement.textContent = `„É©„É≥„ÇØ: ${this.currentRank}`;
                    
                    const currentRankData = ranks.find(r => r.rank === this.currentRank);
                    const comment = currentRankData.comments[Math.floor(Math.random() * currentRankData.comments.length)];
                    
                    this.showComment(comment);
                    this.lastCommentScore = this.score;
                }
            }
            
            showComment(comment) {
                this.commentElement.textContent = comment;
                this.commentElement.style.display = 'block';
                this.commentElement.style.animation = 'none';
                setTimeout(() => {
                    this.commentElement.style.animation = 'commentPulse 2s ease-in-out';
                }, 10);
                
                setTimeout(() => {
                    this.commentElement.style.display = 'none';
                }, 3000);
            }
            
            createExplosion(element) {
                const rect = element.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                const explosion = document.createElement('div');
                explosion.className = 'explosion';
                explosion.style.left = centerX + 'px';
                explosion.style.top = centerY + 'px';
                
                const colors = ['#ff6b6b', '#feca57', '#48dbfb', '#ff9ff3', '#54a0ff'];
                
                for (let i = 0; i < 15; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'explosion-particle';
                    particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    
                    const angle = (i / 15) * Math.PI * 2;
                    const distance = Math.random() * 100 + 50;
                    const dx = Math.cos(angle) * distance;
                    const dy = Math.sin(angle) * distance;
                    
                    particle.style.setProperty('--dx', dx + 'px');
                    particle.style.setProperty('--dy', dy + 'px');
                    
                    explosion.appendChild(particle);
                }
                
                document.body.appendChild(explosion);
                
                setTimeout(() => {
                    explosion.remove();
                }, 800);
            }
            
            removeEnemy(id) {
                const index = this.enemies.findIndex(e => e.id === id);
                if (index !== -1) {
                    const enemy = this.enemies[index];
                    if (enemy.element && enemy.element.parentNode) {
                        enemy.element.remove();
                    }
                    this.enemies.splice(index, 1);
                }
            }
            
            loseLife() {
                this.lives--;
                this.livesElement.textContent = this.lives;
                
                if (this.lives <= 0) {
                    this.gameOver();
                }
            }
            
            gameOver() {
                this.gameRunning = false;
                document.getElementById('finalScore').textContent = this.score;
                this.gameOverElement.style.display = 'block';
            }
        }
        
        function restartGame() {
            // Êó¢Â≠ò„ÅÆÊïµ„ÇíÂÖ®„Å¶ÂâäÈô§
            document.querySelectorAll('.enemy').forEach(enemy => enemy.remove());
            document.querySelectorAll('.explosion').forEach(explosion => explosion.remove());
            
            // „Ç≤„Éº„É†„Ç™„Éº„Éê„ÉºÁîªÈù¢„ÇíÈö†„Åô
            document.getElementById('gameOver').style.display = 'none';
            
            // Êñ∞„Åó„ÅÑ„Ç≤„Éº„É†„ÇíÈñãÂßã
            new TypingGame();
        }
        
        // „Ç≤„Éº„É†ÈñãÂßã
        const game = new TypingGame();
    </script>
</body>
</html>